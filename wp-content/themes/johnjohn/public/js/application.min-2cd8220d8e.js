_now=Date.now||function(){return(new Date).getTime()},_throttle=function(e,t,n){var a,i,o,r=null,l=0;n||(n={});var d=function(){l=n.leading===!1?0:_now(),r=null,o=e.apply(a,i),r||(a=i=null)};return function(){var s=_now();l||n.leading!==!1||(l=s);var c=t-(s-l);return a=this,i=arguments,0>=c||c>t?(r&&(clearTimeout(r),r=null),l=s,o=e.apply(a,i),r||(a=i=null)):r||n.trailing===!1||(r=setTimeout(d,c)),o}},function(e){"use strict";var t={init:function(){t.Mobiledetect(),t.Smoothscroll(),t.Throttle(),t.Preloader(),t.Slider(),t.Heroeffect(),t.Horizspin(),t.Vertspin(),t.Lightbox()},Mobiledetect:function(){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e("body").addClass(1==t?"mobile":"no-touch")},Smoothscroll:function(){e("a[href*=#]:not([href=#])").on("click","",function(t){if(t.preventDefault(),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var n=e(this.hash);if(n=n.length?n:e("[name="+this.hash.slice(1)+"]"),n.length)return e("html,body").animate({scrollTop:n.offset().top},{duration:600,easing:"easeOutCubic"}),!1}})},Throttle:function(){var t=50;e(window).on("scroll",_throttle(function(){},t)),e(window).on("resize",_throttle(function(){},t))},Preloader:function(){e(window).load(function(){e("#preloader .spinner").delay(100).fadeOut(300,function(){e(".body").animate({opacity:1},300).addClass("ready"),e(this).parent().delay(300).fadeOut(500,function(){t.Animated()})})})},Slider:function(){e(document).ready(function(){e(".flexslider").flexslider({animation:"slide",slideshow:!0,slideshowSpeed:4e3,animationSpeed:600,pauseOnHover:!0,controlNav:!0,directionNav:!1})})},Lightbox:function(){e(".js-popupvideo").magnificPopup({type:"iframe",removalDelay:300,mainClass:"mfp-fade"})},Heroeffect:function(){var t=e("body"),n=e("#hero-play"),a=e("#herovid"),i=e("#herovid").attr("data-src"),o="?feature=oembed&autoplay=1",r="?feature=oembed&autoplay=0",l=i.concat(o),d=i.concat(r);n.on("click",function(e){e.preventDefault(),t.hasClass("vid-reveal")?(t.removeClass("vid-reveal").addClass("vid-revealed"),a.attr("src",d)):(t.addClass("vid-reveal"),a.attr("src",l),t.hasClass("vid-revealed")&&t.removeClass("vid-revealed"))})},Horizspin:function(){var t=document.getElementById("slider-range");noUiSlider.create(t,{start:[12],range:{min:[1],max:[24]}}),t.noUiSlider.on("update",function(t,n){var a="/wp-content/themes/johnjohn/public/images/prod2/img"+Math.floor(t[n])+".jpg";e("#spin-img").attr("src",a)})},Vertspin:function(){var t=document.getElementById("vert-slider2");noUiSlider.create(t,{start:[6],orientation:"vertical",range:{min:[1],max:[12]}}),t.noUiSlider.on("update",function(t,n){var a="/wp-content/themes/johnjohn/public/images/prod3/img"+Math.floor(t[n])+".jpg";e("#vert-img2").attr("src",a)});var n=e("#spinner2 .img-wrap").width(),a=n/2+"px",i=e(".range-wrap");i.css({left:a,width:a}),e("#hide-slider2").on("click",function(){e("#spinner2").addClass("begin"),i.css("left",n+20)})},Animated:function(){e(".animation, .animation-visible").each(function(){var t=e(this);t.waypoint(function(){var e=0;t.attr("data-delay")&&(e=parseInt(t.attr("data-delay"),0)),t.hasClass("animated")||setTimeout(function(){t.addClass("animated "+t.attr("data-animation"))},e),e=0},{offset:"70%"})})},ShowAnimated:function(){e(".animation, .animation-visible").each(function(){e(this).addClass("animated")})}};e(function(){t.init()})}(window.jQuery);