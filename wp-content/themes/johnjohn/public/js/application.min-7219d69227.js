_now=Date.now||function(){return(new Date).getTime()},_throttle=function(t,e,n){var i,a,o,r=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:_now(),r=null,o=t.apply(i,a),r||(i=a=null)};return function(){var d=_now();s||n.leading!==!1||(s=d);var c=e-(d-s);return i=this,a=arguments,0>=c||c>e?(r&&(clearTimeout(r),r=null),s=d,o=t.apply(i,a),r||(i=a=null)):r||n.trailing===!1||(r=setTimeout(l,c)),o}},function(t){"use strict";var e={init:function(){e.Mobiledetect(),e.Smoothscroll(),e.Throttle(),e.Preloader(),e.Slider(),e.Heroeffect(),e.Horizspin(),e.Vertspin1(),e.Vertspin2(),e.Lightbox(),e.Waypoint(),e.ScrollSpeed()},Mobiledetect:function(){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t("body").addClass(1==e?"mobile":"no-touch")},Smoothscroll:function(){t("a[href*=#]:not([href=#])").on("click","",function(e){if(e.preventDefault(),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var n=t(this.hash);if(n=n.length?n:t("[name="+this.hash.slice(1)+"]"),n.length)return t("html,body").animate({scrollTop:n.offset().top},{duration:600,easing:"easeOutCubic"}),!1}})},Throttle:function(){var e=50;t(window).on("scroll",_throttle(function(){},e)),t(window).on("resize",_throttle(function(){},e))},Preloader:function(){t(window).load(function(){t("#preloader .spinner").delay(100).fadeOut(300,function(){t(".body").animate({opacity:1},300).addClass("ready"),t(this).parent().delay(300).fadeOut(500,function(){e.Animated()})})})},Slider:function(){t(document).ready(function(){t(".flexslider").flexslider({animation:"slide",slideshow:!0,slideshowSpeed:4e3,animationSpeed:600,pauseOnHover:!0,controlNav:!0,directionNav:!1})})},Lightbox:function(){t(".js-popupvideo").magnificPopup({type:"iframe",removalDelay:300,mainClass:"mfp-fade"})},Heroeffect:function(){var e=t("body"),n=t("#hero-play"),i=t("#herovid"),a=t("#herovid").attr("data-src"),o="?feature=oembed&autoplay=1",r="?feature=oembed&autoplay=0",s=a.concat(o),l=a.concat(r);n.on("click",function(t){t.preventDefault(),e.hasClass("vid-reveal")?(e.removeClass("vid-reveal").addClass("vid-revealed"),i.attr("src",l)):(e.addClass("vid-reveal"),i.attr("src",s),e.hasClass("vid-revealed")&&e.removeClass("vid-revealed"))})},Horizspin:function(){var e=document.getElementById("slider-range");noUiSlider.create(e,{start:[12],range:{min:[1],max:[24]}}),e.noUiSlider.on("update",function(e,n){var i="/wp-content/themes/johnjohn/public/images/prod2/img"+Math.floor(e[n])+".jpg";t("#spin-img").attr("src",i)})},Vertspin1:function(){var e=document.getElementById("vert-slider1");noUiSlider.create(e,{start:[6],orientation:"vertical",range:{min:[1],max:[12]}}),e.noUiSlider.on("update",function(e,n){var i="/wp-content/themes/johnjohn/public/images/prod1/img"+Math.floor(e[n])+".jpg";t("#vert-img1").attr("src",i)});var n=t("#spinner1 > .img-wrap > img").width(),i=n/2+"px",a=t("#rw1");a.css({left:i,width:i}),t("#hide-slider1").on("click",function(){t("#spinner1").addClass("begin"),a.css("left",n+20)})},Vertspin2:function(){var e=document.getElementById("vert-slider2");noUiSlider.create(e,{start:[6],orientation:"vertical",range:{min:[1],max:[12]}}),e.noUiSlider.on("update",function(e,n){var i="/wp-content/themes/johnjohn/public/images/prod3/img"+Math.floor(e[n])+".jpg";t("#vert-img2").attr("src",i)});var n=t("#spinner2 > .img-wrap > img").width(),i=n/2+"px",a=t("#rw2");a.css({left:i,width:i}),t("#hide-slider2").on("click",function(){t("#spinner2").addClass("begin"),a.css("left",n+20)})},Animated:function(){t(".animation, .animation-visible").each(function(){var e=t(this);e.waypoint(function(){var t=0;e.attr("data-delay")&&(t=parseInt(e.attr("data-delay"),0)),e.hasClass("animated")||setTimeout(function(){e.addClass("animated "+e.attr("data-animation"))},t),t=0},{offset:"90%"})})},ShowAnimated:function(){t(".animation, .animation-visible").each(function(){t(this).addClass("animated")})},Waypoint:function(){t(".js-section").each(function(){var e=t(this);e.waypoint(function(){e.addClass("scroll-ready");var n=e.attr("data-section"),i=t("body");i.removeClass("pg-s1-active pg-s2-active pg-s3-active pg-s4-active pg-s5-active pg-s6-active"),i.addClass(n+"-active")},{offset:"50%"})})},ScrollSpeed:function(){t.fn.moveIt=function(){{var n=t(window),i=[];t(this)}t(this).each(function(){i.push(new e(t(this)))}),window.onscroll=function(){var t=n.scrollTop();i.forEach(function(e){e.update(t)})}};var e=function(e){this.el=t(e),this.speed=parseInt(this.el.attr("data-scroll-speed"))};e.prototype.update=function(t){var e=(this.el.offset().top,t/this.speed);this.el.css("transform","translateY("+-e+"px)")},t(function(){t("[data-scroll-speed]").moveIt()})}};t(function(){e.init()})}(window.jQuery);